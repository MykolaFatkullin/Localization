<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">
    <changeSet author="achil (generated)" id="1615233457468-1">
        <sql>
            CREATE TABLE country_codes
            (
            id BIGSERIAL NOT NULL PRIMARY KEY,
            iso VARCHAR(255)
            );
        </sql>
    </changeSet>
    <changeSet author="achil (generated)" id="1615233457468-2">
        <sql>
            INSERT INTO country_codes (id, iso) values(1, 'AF'), (2, 'AL'),(3, 'AQ')
        </sql>
    </changeSet>
    <changeSet author="Nikolay Fatkullin" id="1615233457468-3">
        <sql>
            CREATE TABLE country
            (
            id SERIAL NOT NULL PRIMARY KEY,
            name VARCHAR(255),
            iso_id BIGINT,
            language_id BIGINT
            );
        </sql>
    </changeSet>
    <changeSet author="Nikolay Fatkullin" id="1615233457468-4">
        <sql>
            CREATE TABLE language
            (
            id BIGSERIAL NOT NULL PRIMARY KEY,
            language VARCHAR(255)
            );
        </sql>
    </changeSet>
    <changeSet author="Nikolay Fatkullin" id="1615233457468-5">
        <sql>
            INSERT INTO country(id, name, iso_id, language_id) values(1, 'Afghanistan', 1, 2),(4, 'Albania', 2, 2),(8, 'Антарктика', 3, 1)
        </sql>
    </changeSet>
    <changeSet author="Nikolay Fatkullin" id="1615233457468-6">
        <sql>
            INSERT INTO language (id, language) values (1, 'ru'), (2, 'en'), (3, 'ua')
        </sql>
    </changeSet>
    <changeSet author="Nikolay Fatkullin" id="1615233457468-7">
        <sql>
            ALTER TABLE country ADD CONSTRAINT "country_iso_fk" FOREIGN KEY (iso_id)
            REFERENCES country_codes (id)
            ON UPDATE NO ACTION ON DELETE NO ACTION;
        </sql>
    </changeSet>
    <changeSet author="Nikolay Fatkullin" id="1615233457468-8">
        <sql>
            ALTER TABLE country ADD CONSTRAINT country_language_fk FOREIGN KEY (language_id)
            REFERENCES language (id)
            ON UPDATE NO ACTION ON DELETE NO ACTION;
        </sql>
    </changeSet>
</databaseChangeLog>
